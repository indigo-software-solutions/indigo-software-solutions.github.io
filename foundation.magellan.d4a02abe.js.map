{"version":3,"sources":["bower_components/foundation/js/foundation/foundation.magellan.js"],"names":["$","window","document","undefined","Foundation","libs","name","version","settings","active_class","threshold","destination_threshold","throttle_delay","fixed_top","offset_by_height","duration","easing","init","scope","method","options","inherit","bindings","events","self","S","set_expedition_position","off","on","add_namespace","e","sameHost","hostname","location","samePath","filterPathname","pathname","testHash","hash","replace","anchor","preventDefault","expedition","closest","attr_name","data","split","join","target","length","scroll_top","offset","top","outerHeight","stop","animate","history","pushState","search","throttle","check_for_arrivals","bind","update_arrivals","update_expedition_positions","each","idx","el","top_offset","styles","attr","parseInt","isNaN","data_attr","window_top_offset","scrollTop","placeholder","prev","clone","removeAttr","before","css","position","addClass","remove","removeClass","offsets","arrivals","find","active_item","item","viewport_offset","not","arrival","window_offset","map","dest","Math","floor","destination","sort","a","b","str","namespace","reflow","jQuery"],"mappings":"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","file":"foundation.magellan.d4a02abe.js","sourceRoot":"../app","sourcesContent":[";(function ($, window, document, undefined) {\n  'use strict';\n\n  Foundation.libs['magellan-expedition'] = {\n    name : 'magellan-expedition',\n\n    version : '5.5.3',\n\n    settings : {\n      active_class : 'active',\n      threshold : 0, // pixels from the top of the expedition for it to become fixes\n      destination_threshold : 20, // pixels from the top of destination for it to be considered active\n      throttle_delay : 30, // calculation throttling to increase framerate\n      fixed_top : 0, // top distance in pixels assigend to the fixed element on scroll\n      offset_by_height : true,  // whether to offset the destination by the expedition height. Usually you want this to be true, unless your expedition is on the side.\n      duration : 700, // animation duration time\n      easing : 'swing' // animation easing\n    },\n\n    init : function (scope, method, options) {\n      Foundation.inherit(this, 'throttle');\n      this.bindings(method, options);\n    },\n\n    events : function () {\n      var self = this,\n          S = self.S,\n          settings = self.settings;\n\n      // initialize expedition offset\n      self.set_expedition_position();\n\n      S(self.scope)\n        .off('.magellan')\n        .on('click.fndtn.magellan', '[' + self.add_namespace('data-magellan-arrival') + '] a[href*=#]', function (e) {\n          var sameHost = ((this.hostname === location.hostname) || !this.hostname),\n              samePath = self.filterPathname(location.pathname) === self.filterPathname(this.pathname),\n              testHash = this.hash.replace(/(:|\\.|\\/)/g, '\\\\$1'),\n              anchor = this;\n\n          if (sameHost && samePath && testHash) {\n            e.preventDefault();\n            var expedition = $(this).closest('[' + self.attr_name() + ']'),\n                settings = expedition.data('magellan-expedition-init'),\n                hash = this.hash.split('#').join(''),\n                target = $('a[name=\"' + hash + '\"]');\n\n            if (target.length === 0) {\n              target = $('#' + hash);\n\n            }\n\n            // Account for expedition height if fixed position\n            var scroll_top = target.offset().top - settings.destination_threshold + 1;\n            if (settings.offset_by_height) {\n              scroll_top = scroll_top - expedition.outerHeight();\n            }\n            $('html, body').stop().animate({\n              'scrollTop' : scroll_top\n            }, settings.duration, settings.easing, function () {\n              if (history.pushState) {\n                history.pushState(null, null, anchor.pathname + anchor.search + '#' + hash);\n              } else {\n                location.hash = anchor.pathname + anchor.search + '#' + hash;\n              }\n            });\n          }\n        })\n        .on('scroll.fndtn.magellan', self.throttle(this.check_for_arrivals.bind(this), settings.throttle_delay));\n    },\n\n    check_for_arrivals : function () {\n      var self = this;\n      self.update_arrivals();\n      self.update_expedition_positions();\n    },\n\n    set_expedition_position : function () {\n      var self = this;\n      $('[' + this.attr_name() + '=fixed]', self.scope).each(function (idx, el) {\n        var expedition = $(this),\n            settings = expedition.data('magellan-expedition-init'),\n            styles = expedition.attr('styles'), // save styles\n            top_offset, fixed_top;\n\n        expedition.attr('style', '');\n        top_offset = expedition.offset().top + settings.threshold;\n\n        //set fixed-top by attribute\n        fixed_top = parseInt(expedition.data('magellan-fixed-top'));\n        if (!isNaN(fixed_top)) {\n          self.settings.fixed_top = fixed_top;\n        }\n\n        expedition.data(self.data_attr('magellan-top-offset'), top_offset);\n        expedition.attr('style', styles);\n      });\n    },\n\n    update_expedition_positions : function () {\n      var self = this,\n          window_top_offset = $(window).scrollTop();\n\n      $('[' + this.attr_name() + '=fixed]', self.scope).each(function () {\n        var expedition = $(this),\n            settings = expedition.data('magellan-expedition-init'),\n            styles = expedition.attr('style'), // save styles\n            top_offset = expedition.data('magellan-top-offset');\n\n        //scroll to the top distance\n        if (window_top_offset + self.settings.fixed_top >= top_offset) {\n          // Placeholder allows height calculations to be consistent even when\n          // appearing to switch between fixed/non-fixed placement\n          var placeholder = expedition.prev('[' + self.add_namespace('data-magellan-expedition-clone') + ']');\n          if (placeholder.length === 0) {\n            placeholder = expedition.clone();\n            placeholder.removeAttr(self.attr_name());\n            placeholder.attr(self.add_namespace('data-magellan-expedition-clone'), '');\n            expedition.before(placeholder);\n          }\n          expedition.css({position :'fixed', top : settings.fixed_top}).addClass('fixed');\n        } else {\n          expedition.prev('[' + self.add_namespace('data-magellan-expedition-clone') + ']').remove();\n          expedition.attr('style', styles).css('position', '').css('top', '').removeClass('fixed');\n        }\n      });\n    },\n\n    update_arrivals : function () {\n      var self = this,\n          window_top_offset = $(window).scrollTop();\n\n      $('[' + this.attr_name() + ']', self.scope).each(function () {\n        var expedition = $(this),\n            settings = expedition.data(self.attr_name(true) + '-init'),\n            offsets = self.offsets(expedition, window_top_offset),\n            arrivals = expedition.find('[' + self.add_namespace('data-magellan-arrival') + ']'),\n            active_item = false;\n        offsets.each(function (idx, item) {\n          if (item.viewport_offset >= item.top_offset) {\n            var arrivals = expedition.find('[' + self.add_namespace('data-magellan-arrival') + ']');\n            arrivals.not(item.arrival).removeClass(settings.active_class);\n            item.arrival.addClass(settings.active_class);\n            active_item = true;\n            return true;\n          }\n        });\n\n        if (!active_item) {\n          arrivals.removeClass(settings.active_class);\n        }\n      });\n    },\n\n    offsets : function (expedition, window_offset) {\n      var self = this,\n          settings = expedition.data(self.attr_name(true) + '-init'),\n          viewport_offset = window_offset;\n\n      return expedition.find('[' + self.add_namespace('data-magellan-arrival') + ']').map(function (idx, el) {\n        var name = $(this).data(self.data_attr('magellan-arrival')),\n            dest = $('[' + self.add_namespace('data-magellan-destination') + '=' + name + ']');\n        if (dest.length > 0) {\n          var top_offset = dest.offset().top - settings.destination_threshold;\n          if (settings.offset_by_height) {\n            top_offset = top_offset - expedition.outerHeight();\n          }\n          top_offset = Math.floor(top_offset);\n          return {\n            destination : dest,\n            arrival : $(this),\n            top_offset : top_offset,\n            viewport_offset : viewport_offset\n          }\n        }\n      }).sort(function (a, b) {\n        if (a.top_offset < b.top_offset) {\n          return -1;\n        }\n        if (a.top_offset > b.top_offset) {\n          return 1;\n        }\n        return 0;\n      });\n    },\n\n    data_attr : function (str) {\n      if (this.namespace.length > 0) {\n        return this.namespace + '-' + str;\n      }\n\n      return str;\n    },\n\n    off : function () {\n      this.S(this.scope).off('.magellan');\n      this.S(window).off('.magellan');\n    },\n\n    filterPathname : function (pathname) {\n      pathname = pathname || '';\n      return pathname\n          .replace(/^\\//,'')\n          .replace(/(?:index|default).[a-zA-Z]{3,4}$/,'')\n          .replace(/\\/$/,'');\n    },\n\n    reflow : function () {\n      var self = this;\n      // remove placeholder expeditions used for height calculation purposes\n      $('[' + self.add_namespace('data-magellan-expedition-clone') + ']', self.scope).remove();\n    }\n  };\n}(jQuery, window, window.document));\n"]}