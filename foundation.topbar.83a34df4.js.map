{"version":3,"sources":["bower_components/foundation/js/foundation/foundation.topbar.js"],"names":["$","window","document","undefined","Foundation","libs","topbar","name","version","settings","index","start_offset","sticky_class","custom_back_text","back_text","mobile_show_parent_link","is_hover","scrolltop","sticky_on","dropdown_autoclose","init","section","method","options","inherit","self","register_media","bindings","S","attr_name","scope","each","data","topbarContainer","parent","hasClass","is_sticky","sticky_topbar","outerHeight","offset","top","assembled","assemble","addClass","removeClass","add_custom_rule","sticky","smallMatch","matchMedia","media_queries","small","matches","medMatch","medium","lrgMatch","large","indexOf","toggle","toggleEl","closest","breakpoint","rtl","css","right","left","toggleClass","scrollTo","update_sticky_positioning","timer","events","bar","off","on","e","preventDefault","li","target","Modernizr","touch","stopImmediatePropagation","find","parents","siblings","nodeName","$this","$selectedLi","next","throttle","resize","call","trigger","load","length","$movedLi","$previousLevelUl","setTimeout","focus","blur","stickyOffset","stickyContainer","doToggle","body","detach","$link","$titleLi","$dropdown","url","attr","html","prepend","appendTo","extend","height","ul","total","klass","$window","distance","scrollTop","reflow","jQuery"],"mappings":"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","file":"foundation.topbar.83a34df4.js","sourceRoot":"../app","sourcesContent":[";(function ($, window, document, undefined) {\n  'use strict';\n\n  Foundation.libs.topbar = {\n    name : 'topbar',\n\n    version : '5.5.3',\n\n    settings : {\n      index : 0,\n      start_offset : 0,\n      sticky_class : 'sticky',\n      custom_back_text : true,\n      back_text : 'Back',\n      mobile_show_parent_link : true,\n      is_hover : true,\n      scrolltop : true, // jump to top when sticky nav menu toggle is clicked\n      sticky_on : 'all',\n      dropdown_autoclose: true\n    },\n\n    init : function (section, method, options) {\n      Foundation.inherit(this, 'add_custom_rule register_media throttle');\n      var self = this;\n\n      self.register_media('topbar', 'foundation-mq-topbar');\n\n      this.bindings(method, options);\n\n      self.S('[' + this.attr_name() + ']', this.scope).each(function () {\n        var topbar = $(this),\n            settings = topbar.data(self.attr_name(true) + '-init'),\n            section = self.S('section, .top-bar-section', this);\n        topbar.data('index', 0);\n        var topbarContainer = topbar.parent();\n        if (topbarContainer.hasClass('fixed') || self.is_sticky(topbar, topbarContainer, settings) ) {\n          self.settings.sticky_class = settings.sticky_class;\n          self.settings.sticky_topbar = topbar;\n          topbar.data('height', topbarContainer.outerHeight());\n          topbar.data('stickyoffset', topbarContainer.offset().top);\n        } else {\n          topbar.data('height', topbar.outerHeight());\n        }\n\n        if (!settings.assembled) {\n          self.assemble(topbar);\n        }\n\n        if (settings.is_hover) {\n          self.S('.has-dropdown', topbar).addClass('not-click');\n        } else {\n          self.S('.has-dropdown', topbar).removeClass('not-click');\n        }\n\n        // Pad body when sticky (scrolled) or fixed.\n        self.add_custom_rule('.f-topbar-fixed { padding-top: ' + topbar.data('height') + 'px }');\n\n        if (topbarContainer.hasClass('fixed')) {\n          self.S('body').addClass('f-topbar-fixed');\n        }\n      });\n\n    },\n\n    is_sticky : function (topbar, topbarContainer, settings) {\n      var sticky     = topbarContainer.hasClass(settings.sticky_class);\n      var smallMatch = matchMedia(Foundation.media_queries.small).matches;\n      var medMatch   = matchMedia(Foundation.media_queries.medium).matches;\n      var lrgMatch   = matchMedia(Foundation.media_queries.large).matches;\n\n      if (sticky && settings.sticky_on === 'all') {\n        return true;\n      }\n      if (sticky && this.small() && settings.sticky_on.indexOf('small') !== -1) {\n        if (smallMatch && !medMatch && !lrgMatch) { return true; }\n      }\n      if (sticky && this.medium() && settings.sticky_on.indexOf('medium') !== -1) {\n        if (smallMatch && medMatch && !lrgMatch) { return true; }\n      }\n      if (sticky && this.large() && settings.sticky_on.indexOf('large') !== -1) {\n        if (smallMatch && medMatch && lrgMatch) { return true; }\n      }\n\n       return false;\n    },\n\n    toggle : function (toggleEl) {\n      var self = this,\n          topbar;\n\n      if (toggleEl) {\n        topbar = self.S(toggleEl).closest('[' + this.attr_name() + ']');\n      } else {\n        topbar = self.S('[' + this.attr_name() + ']');\n      }\n\n      var settings = topbar.data(this.attr_name(true) + '-init');\n\n      var section = self.S('section, .top-bar-section', topbar);\n\n      if (self.breakpoint()) {\n        if (!self.rtl) {\n          section.css({left : '0%'});\n          $('>.name', section).css({left : '100%'});\n        } else {\n          section.css({right : '0%'});\n          $('>.name', section).css({right : '100%'});\n        }\n\n        self.S('li.moved', section).removeClass('moved');\n        topbar.data('index', 0);\n\n        topbar\n          .toggleClass('expanded')\n          .css('height', '');\n      }\n\n      if (settings.scrolltop) {\n        if (!topbar.hasClass('expanded')) {\n          if (topbar.hasClass('fixed')) {\n            topbar.parent().addClass('fixed');\n            topbar.removeClass('fixed');\n            self.S('body').addClass('f-topbar-fixed');\n          }\n        } else if (topbar.parent().hasClass('fixed')) {\n          if (settings.scrolltop) {\n            topbar.parent().removeClass('fixed');\n            topbar.addClass('fixed');\n            self.S('body').removeClass('f-topbar-fixed');\n\n            window.scrollTo(0, 0);\n          } else {\n            topbar.parent().removeClass('expanded');\n          }\n        }\n      } else {\n        if (self.is_sticky(topbar, topbar.parent(), settings)) {\n          topbar.parent().addClass('fixed');\n        }\n\n        if (topbar.parent().hasClass('fixed')) {\n          if (!topbar.hasClass('expanded')) {\n            topbar.removeClass('fixed');\n            topbar.parent().removeClass('expanded');\n            self.update_sticky_positioning();\n          } else {\n            topbar.addClass('fixed');\n            topbar.parent().addClass('expanded');\n            self.S('body').addClass('f-topbar-fixed');\n          }\n        }\n      }\n    },\n\n    timer : null,\n\n    events : function (bar) {\n      var self = this,\n          S = this.S;\n\n      S(this.scope)\n        .off('.topbar')\n        .on('click.fndtn.topbar', '[' + this.attr_name() + '] .toggle-topbar', function (e) {\n          e.preventDefault();\n          self.toggle(this);\n        })\n        .on('click.fndtn.topbar contextmenu.fndtn.topbar', '.top-bar .top-bar-section li a[href^=\"#\"],[' + this.attr_name() + '] .top-bar-section li a[href^=\"#\"]', function (e) {\n          var li = $(this).closest('li'),\n              topbar = li.closest('[' + self.attr_name() + ']'),\n              settings = topbar.data(self.attr_name(true) + '-init');\n\n          if (settings.dropdown_autoclose && settings.is_hover) {\n            var hoverLi = $(this).closest('.hover');\n            hoverLi.removeClass('hover');\n          }\n          if (self.breakpoint() && !li.hasClass('back') && !li.hasClass('has-dropdown')) {\n            self.toggle();\n          }\n\n        })\n        .on('click.fndtn.topbar', '[' + this.attr_name() + '] li.has-dropdown', function (e) {\n          var li = S(this),\n              target = S(e.target),\n              topbar = li.closest('[' + self.attr_name() + ']'),\n              settings = topbar.data(self.attr_name(true) + '-init');\n\n          if (target.data('revealId')) {\n            self.toggle();\n            return;\n          }\n\n          if (self.breakpoint()) {\n            return;\n          }\n\n          if (settings.is_hover && !Modernizr.touch) {\n            return;\n          }\n\n          e.stopImmediatePropagation();\n\n          if (li.hasClass('hover')) {\n            li\n              .removeClass('hover')\n              .find('li')\n              .removeClass('hover');\n\n            li.parents('li.hover')\n              .removeClass('hover');\n          } else {\n            li.addClass('hover');\n\n            $(li).siblings().removeClass('hover');\n\n            if (target[0].nodeName === 'A' && target.parent().hasClass('has-dropdown')) {\n              e.preventDefault();\n            }\n          }\n        })\n        .on('click.fndtn.topbar', '[' + this.attr_name() + '] .has-dropdown>a', function (e) {\n          if (self.breakpoint()) {\n\n            e.preventDefault();\n\n            var $this = S(this),\n                topbar = $this.closest('[' + self.attr_name() + ']'),\n                section = topbar.find('section, .top-bar-section'),\n                dropdownHeight = $this.next('.dropdown').outerHeight(),\n                $selectedLi = $this.closest('li');\n\n            topbar.data('index', topbar.data('index') + 1);\n            $selectedLi.addClass('moved');\n\n            if (!self.rtl) {\n              section.css({left : -(100 * topbar.data('index')) + '%'});\n              section.find('>.name').css({left : 100 * topbar.data('index') + '%'});\n            } else {\n              section.css({right : -(100 * topbar.data('index')) + '%'});\n              section.find('>.name').css({right : 100 * topbar.data('index') + '%'});\n            }\n\n            topbar.css('height', $this.siblings('ul').outerHeight(true) + topbar.data('height'));\n          }\n        });\n\n      S(window).off('.topbar').on('resize.fndtn.topbar', self.throttle(function () {\n          self.resize.call(self);\n      }, 50)).trigger('resize.fndtn.topbar').load(function () {\n          // Ensure that the offset is calculated after all of the pages resources have loaded\n          S(this).trigger('resize.fndtn.topbar');\n      });\n\n      S('body').off('.topbar').on('click.fndtn.topbar', function (e) {\n        var parent = S(e.target).closest('li').closest('li.hover');\n\n        if (parent.length > 0) {\n          return;\n        }\n\n        S('[' + self.attr_name() + '] li.hover').removeClass('hover');\n      });\n\n      // Go up a level on Click\n      S(this.scope).on('click.fndtn.topbar', '[' + this.attr_name() + '] .has-dropdown .back', function (e) {\n        e.preventDefault();\n\n        var $this = S(this),\n            topbar = $this.closest('[' + self.attr_name() + ']'),\n            section = topbar.find('section, .top-bar-section'),\n            settings = topbar.data(self.attr_name(true) + '-init'),\n            $movedLi = $this.closest('li.moved'),\n            $previousLevelUl = $movedLi.parent();\n\n        topbar.data('index', topbar.data('index') - 1);\n\n        if (!self.rtl) {\n          section.css({left : -(100 * topbar.data('index')) + '%'});\n          section.find('>.name').css({left : 100 * topbar.data('index') + '%'});\n        } else {\n          section.css({right : -(100 * topbar.data('index')) + '%'});\n          section.find('>.name').css({right : 100 * topbar.data('index') + '%'});\n        }\n\n        if (topbar.data('index') === 0) {\n          topbar.css('height', '');\n        } else {\n          topbar.css('height', $previousLevelUl.outerHeight(true) + topbar.data('height'));\n        }\n\n        setTimeout(function () {\n          $movedLi.removeClass('moved');\n        }, 300);\n      });\n\n      // Show dropdown menus when their items are focused\n      S(this.scope).find('.dropdown a')\n        .focus(function () {\n          $(this).parents('.has-dropdown').addClass('hover');\n        })\n        .blur(function () {\n          $(this).parents('.has-dropdown').removeClass('hover');\n        });\n    },\n\n    resize : function () {\n      var self = this;\n      self.S('[' + this.attr_name() + ']').each(function () {\n        var topbar = self.S(this),\n            settings = topbar.data(self.attr_name(true) + '-init');\n\n        var stickyContainer = topbar.parent('.' + self.settings.sticky_class);\n        var stickyOffset;\n\n        if (!self.breakpoint()) {\n          var doToggle = topbar.hasClass('expanded');\n          topbar\n            .css('height', '')\n            .removeClass('expanded')\n            .find('li')\n            .removeClass('hover');\n\n            if (doToggle) {\n              self.toggle(topbar);\n            }\n        }\n\n        if (self.is_sticky(topbar, stickyContainer, settings)) {\n          if (stickyContainer.hasClass('fixed')) {\n            // Remove the fixed to allow for correct calculation of the offset.\n            stickyContainer.removeClass('fixed');\n\n            stickyOffset = stickyContainer.offset().top;\n            if (self.S(document.body).hasClass('f-topbar-fixed')) {\n              stickyOffset -= topbar.data('height');\n            }\n\n            topbar.data('stickyoffset', stickyOffset);\n            stickyContainer.addClass('fixed');\n          } else {\n            stickyOffset = stickyContainer.offset().top;\n            topbar.data('stickyoffset', stickyOffset);\n          }\n        }\n\n      });\n    },\n\n    breakpoint : function () {\n      return !matchMedia(Foundation.media_queries['topbar']).matches;\n    },\n\n    small : function () {\n      return matchMedia(Foundation.media_queries['small']).matches;\n    },\n\n    medium : function () {\n      return matchMedia(Foundation.media_queries['medium']).matches;\n    },\n\n    large : function () {\n      return matchMedia(Foundation.media_queries['large']).matches;\n    },\n\n    assemble : function (topbar) {\n      var self = this,\n          settings = topbar.data(this.attr_name(true) + '-init'),\n          section = self.S('section, .top-bar-section', topbar);\n\n      // Pull element out of the DOM for manipulation\n      section.detach();\n\n      self.S('.has-dropdown>a', section).each(function () {\n        var $link = self.S(this),\n            $dropdown = $link.siblings('.dropdown'),\n            url = $link.attr('href'),\n            $titleLi;\n\n        if (!$dropdown.find('.title.back').length) {\n\n          if (settings.mobile_show_parent_link == true && url) {\n            $titleLi = $('<li class=\"title back js-generated\"><h5><a href=\"javascript:void(0)\"></a></h5></li><li class=\"parent-link hide-for-medium-up\"><a class=\"parent-link js-generated\" href=\"' + url + '\">' + $link.html() +'</a></li>');\n          } else {\n            $titleLi = $('<li class=\"title back js-generated\"><h5><a href=\"javascript:void(0)\"></a></h5>');\n          }\n\n          // Copy link to subnav\n          if (settings.custom_back_text == true) {\n            $('h5>a', $titleLi).html(settings.back_text);\n          } else {\n            $('h5>a', $titleLi).html('&laquo; ' + $link.html());\n          }\n          $dropdown.prepend($titleLi);\n        }\n      });\n\n      // Put element back in the DOM\n      section.appendTo(topbar);\n\n      // check for sticky\n      this.sticky();\n\n      this.assembled(topbar);\n    },\n\n    assembled : function (topbar) {\n      topbar.data(this.attr_name(true), $.extend({}, topbar.data(this.attr_name(true)), {assembled : true}));\n    },\n\n    height : function (ul) {\n      var total = 0,\n          self = this;\n\n      $('> li', ul).each(function () {\n        total += self.S(this).outerHeight(true);\n      });\n\n      return total;\n    },\n\n    sticky : function () {\n      var self = this;\n\n      this.S(window).on('scroll', function () {\n        self.update_sticky_positioning();\n      });\n    },\n\n    update_sticky_positioning : function () {\n      var klass = '.' + this.settings.sticky_class,\n          $window = this.S(window),\n          self = this;\n\n      if (self.settings.sticky_topbar && self.is_sticky(this.settings.sticky_topbar,this.settings.sticky_topbar.parent(), this.settings)) {\n        var distance = this.settings.sticky_topbar.data('stickyoffset') + this.settings.start_offset;\n        if (!self.S(klass).hasClass('expanded')) {\n          if ($window.scrollTop() > (distance)) {\n            if (!self.S(klass).hasClass('fixed')) {\n              self.S(klass).addClass('fixed');\n              self.S('body').addClass('f-topbar-fixed');\n            }\n          } else if ($window.scrollTop() <= distance) {\n            if (self.S(klass).hasClass('fixed')) {\n              self.S(klass).removeClass('fixed');\n              self.S('body').removeClass('f-topbar-fixed');\n            }\n          }\n        }\n      }\n    },\n\n    off : function () {\n      this.S(this.scope).off('.fndtn.topbar');\n      this.S(window).off('.fndtn.topbar');\n    },\n\n    reflow : function () {}\n  };\n}(jQuery, window, window.document));\n"]}